<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0085)https://web.archive.org/web/20060409094110/http://www.osdcom.info/content/view/31/39/ -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1252"><script src="./OSDEV Community - Simple Memory Allocation Algorithms_files/analytics.js.&#19979;&#36733;" type="text/javascript"></script>
<script type="text/javascript">window.addEventListener('DOMContentLoaded',function(){var v=archive_analytics.values;v.service='wb';v.server_name='wwwb-app12.us.archive.org';v.server_ms=871;archive_analytics.send_pageview({});});</script><script type="text/javascript" src="./OSDEV Community - Simple Memory Allocation Algorithms_files/wbhack.js.&#19979;&#36733;" charset="utf-8"></script>

<script type="text/javascript">
__wbhack.init('https://web.archive.org/web');
</script>
<link rel="stylesheet" type="text/css" href="./OSDEV Community - Simple Memory Allocation Algorithms_files/banner-styles.css">
<link rel="stylesheet" type="text/css" href="./OSDEV Community - Simple Memory Allocation Algorithms_files/iconochive.css">

<!-- End Wayback Rewrite JS Include -->
<title>OSDEV Community - Simple Memory Allocation Algorithms</title>
<meta name="title" content="Simple Memory Allocation Algorithms">
<meta name="author" content="Administrator">
<meta name="description" content="OSDEV Community is a web portal dedicated to operating system development, attracting programmers into an advanced development environment.">
<meta name="keywords" content="osdev, os development, os dev, operating system development, os community, system development">
<meta name="Generator" content="Mambo - Copyright 2000 - 2005 Miro International Pty Ltd.  All rights reserved.">
<meta name="robots" content="index, follow">
<!--<base href="https://web.archive.org/web/20060409094110/http://www.osdcom.info/">--><base href=".">
	<link rel="shortcut icon" href="https://web.archive.org/web/20060409094110im_/http://www.osdcom.info/images/favicon.ico">
	
<link href="./OSDEV Community - Simple Memory Allocation Algorithms_files/template_css.css" rel="stylesheet" type="text/css">
</head>
<body><div id="wm-ipp" lang="en" style="display: block; direction: ltr;" class="">
<div style="position:fixed;left:0;top:0;right:0;">
<div id="wm-ipp-inside">
  <div style="position:relative;">
    <div id="wm-logo" style="float:left;width:130px;padding-top:10px;">
      <a href="https://web.archive.org/web/" title="Wayback Machine home page"><img src="./OSDEV Community - Simple Memory Allocation Algorithms_files/wayback-toolbar-logo.png" alt="Wayback Machine" width="110" height="39" border="0"></a>
    </div>
    <div class="r" style="float:right;">
      <div id="wm-btns" style="text-align:right;height:25px;">
                  <div id="wm-save-snapshot-success">success</div>
          <div id="wm-save-snapshot-fail">fail</div>
          <a href="https://web.archive.org/web/20060409094110/http://www.osdcom.info/#" onclick="__wm.saveSnapshot(&#39;http://www.osdcom.info/content/view/31/39/&#39;, &#39;20060409094110&#39;)" title="Share via My Web Archive" id="wm-save-snapshot-open" style="display: none;">
            <span class="iconochive-web"></span>
          </a>
          <a href="https://archive.org/account/login.php" title="Sign In" id="wm-sign-in" style="display: inline-block;">
            <span class="iconochive-person"></span>
          </a>
          <span id="wm-save-snapshot-in-progress" class="iconochive-web" style="display: none;"></span>
        	<a href="http://faq.web.archive.org/" title="Get some help using the Wayback Machine" style="top:-6px;"><span class="iconochive-question" style="color:rgb(87,186,244);font-size:160%;"></span></a>
	<a id="wm-tb-close" href="https://web.archive.org/web/20060409094110/http://www.osdcom.info/#close" onclick="__wm.h(event);return false;" style="top:-2px;" title="Close the toolbar"><span class="iconochive-remove-circle" style="color:#888888;font-size:240%;"></span></a>
      </div>
      <div id="wm-share" style="text-align:right;">
	<a href="https://web.archive.org/web/20060409094110/http://www.osdcom.info/#" onclick="window.open(&#39;https://www.facebook.com/sharer/sharer.php?u=https://web.archive.org/web/20060409094110/http://www.osdcom.info:80/content/view/31/39/&#39;, &#39;&#39;, &#39;height=400,width=600&#39;); return false;" title="Share on Facebook" style="margin-right:5px;" target="_blank"><span class="iconochive-facebook" style="color:#3b5998;font-size:160%;"></span></a>
	<a href="https://web.archive.org/web/20060409094110/http://www.osdcom.info/#" onclick="window.open(&#39;https://twitter.com/intent/tweet?text=https://web.archive.org/web/20060409094110/http://www.osdcom.info:80/content/view/31/39/&amp;via=internetarchive&#39;, &#39;&#39;, &#39;height=400,width=600&#39;); return false;" title="Share on Twitter" style="margin-right:5px;" target="_blank"><span class="iconochive-twitter" style="color:#1dcaff;font-size:160%;"></span></a>
      </div>
    </div>
    <table class="c" style="">
      <tbody>
	<tr>
	  <td class="u" colspan="2">
	    <form target="_top" method="get" action="https://web.archive.org/web/submit" name="wmtb" id="wmtb"><input type="text" name="url" id="wmtbURL" value="http://www.osdcom.info/content/view/31/39/" onfocus="this.focus();this.select();" autocomplete="off"><input type="hidden" name="type" value="replay"><input type="hidden" name="date" value="20060409094110"><input type="submit" value="Go"></form>
	  </td>
	  <td class="n" rowspan="2" style="width:110px;">
	    <table>
	      <tbody>
		<!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
		<tr class="m">
		  <td class="b" nowrap="nowrap">Mar</td>
		  <td class="c" id="displayMonthEl" title="You are here: 09:41:10 Apr 09, 2006">Apr</td>
		  <td class="f" nowrap="nowrap"><a href="https://web.archive.org/web/20060519182714/http://www.osdcom.info:80/content/view/31/39/" title="19 May 2006"><strong>May</strong></a></td>
		</tr>
		<!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
		<tr class="d">
		  <td class="b" nowrap="nowrap"><img src="./OSDEV Community - Simple Memory Allocation Algorithms_files/wm_tb_prv_off.png" alt="Previous capture" width="14" height="16" border="0"></td>
		  <td class="c" id="displayDayEl" style="width:34px;font-size:24px;white-space:nowrap;" title="You are here: 09:41:10 Apr 09, 2006">09</td>
		  <td class="f" nowrap="nowrap"><a href="https://web.archive.org/web/20060519182714/http://www.osdcom.info:80/content/view/31/39/" title="18:27:14 May 19, 2006"><img src="./OSDEV Community - Simple Memory Allocation Algorithms_files/wm_tb_nxt_on.png" alt="Next capture" width="14" height="16" border="0"></a></td>
		</tr>
		<!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
		<tr class="y">
		  <td class="b" nowrap="nowrap">2005</td>
		  <td class="c" id="displayYearEl" title="You are here: 09:41:10 Apr 09, 2006">2006</td>
		  <td class="f" nowrap="nowrap"><a href="https://web.archive.org/web/20070906014847/http://www.osdcom.info:80/content/view/31/39/" title="06 Sep 2007"><strong>2007</strong></a></td>
		</tr>
	      </tbody>
	    </table>
	  </td>
	</tr>
	<tr>
	  <td class="s">
	    	    <div id="wm-nav-captures"><a class="t" href="https://web.archive.org/web/*/http://www.osdcom.info/content/view/31/39/" title="See a list of every capture for this URL">20 captures</a><div class="r" title="Timespan for captures of this URL">9 Apr 2006 - 6 Aug 2016</div></div>
	  </td>
	  <td class="k">
	    <a href="https://web.archive.org/web/20001015000000/http://www.osdcom.info/content/view/31/39/" id="wm-graph-anchor">
	      <div id="wm-ipp-sparkline" title="Explore captures for this URL" style="position: relative">
		<canvas id="wm-sparkline-canvas" width="575" height="27" border="0"></canvas>
	      <div class="yt" style="display: none; width: 25px; height: 27px; left: 100px;"></div><div class="mt" style="display: none; width: 2px; height: 27px; left: 119px;"></div></div>
	    </a>
	  </td>
	</tr>
      </tbody>
    </table>
    <div style="position:absolute;bottom:0;right:2px;text-align:right;">
      <a id="wm-expand" class="wm-btn wm-closed" href="https://web.archive.org/web/20060409094110/http://www.osdcom.info/#expand" onclick="__wm.ex(event);return false;"><span id="wm-expand-icon" class="iconochive-down-solid"></span> <span style="font-size:80%">About this capture</span></a>
    </div>
  </div>
    <div id="wm-capinfo" style="border-top:1px solid #777;display:none; overflow: hidden">
            <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center">COLLECTED BY</div>
    <div style="padding:3px;position:relative" id="wm-collected-by-content">
            <div style="display:inline-block;vertical-align:top;width:50%;">
			<span class="c-logo" style="background-image:url(https://archive.org/services/img/alexacrawls);"></span>
		Organization: <a style="color:#33f;" href="https://archive.org/details/alexacrawls" target="_new"><span class="wm-title">Alexa Crawls</span></a>
		<div style="max-height:75px;overflow:hidden;position:relative;">
	  <div style="position:absolute;top:0;left:0;width:100%;height:75px;background:linear-gradient(to bottom,rgba(255,255,255,0) 0%,rgba(255,255,255,0) 90%,rgba(255,255,255,255) 100%);"></div>
	  Starting in 1996, <a href="http://www.alexa.com/">Alexa Internet</a> has been donating their crawl data to the Internet Archive.  Flowing in every day, these data are added to the <a href="http://web.archive.org/">Wayback Machine</a> after an embargo period.
	</div>
	      </div>
      <div style="display:inline-block;vertical-align:top;width:49%;">
			<span class="c-logo" style="background-image:url(https://archive.org/services/img/alexa_ei)"></span>
		<div>Collection: <a style="color:#33f;" href="https://archive.org/details/alexa_ei" target="_new"><span class="wm-title">Alexa Crawl EI</span></a></div>
		<div style="max-height:75px;overflow:hidden;position:relative;">
	  <div style="position:absolute;top:0;left:0;width:100%;height:75px;background:linear-gradient(to bottom,rgba(255,255,255,0) 0%,rgba(255,255,255,0) 90%,rgba(255,255,255,255) 100%);"></div>
	  Crawl EI from Alexa Internet.  This data is currently not publicly accessible.
	</div>
	      </div>
    </div>
    <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center" title="Timestamps for the elements of this page">TIMESTAMPS</div>
    <div>
      <div id="wm-capresources" style="margin:0 5px 5px 5px;max-height:250px;overflow-y:scroll !important"></div>
      <div id="wm-capresources-loading" style="text-align:left;margin:0 20px 5px 5px;display:none"><img src="./OSDEV Community - Simple Memory Allocation Algorithms_files/loading.gif" alt="loading"></div>
    </div>
  </div></div></div></div><!-- BEGIN WAYBACK TOOLBAR INSERT -->
<script type="text/javascript" src="./OSDEV Community - Simple Memory Allocation Algorithms_files/timestamp.js.&#19979;&#36733;" charset="utf-8"></script>
<script type="text/javascript" src="./OSDEV Community - Simple Memory Allocation Algorithms_files/graph-calc.js.&#19979;&#36733;" charset="utf-8"></script>
<script type="text/javascript" src="./OSDEV Community - Simple Memory Allocation Algorithms_files/auto-complete.js.&#19979;&#36733;" charset="utf-8"></script>
<script type="text/javascript" src="./OSDEV Community - Simple Memory Allocation Algorithms_files/toolbar.js.&#19979;&#36733;" charset="utf-8"></script>

<style type="text/css">
body {
  margin-top:0 !important;
  padding-top:0 !important;
  /*min-width:800px !important;*/
}
.wb-autocomplete-suggestions {
    text-align: left; cursor: default; border: 1px solid #ccc; border-top: 0; background: #fff; box-shadow: -1px 1px 3px rgba(0,0,0,.1);
    position: absolute; display: none; z-index: 2147483647; max-height: 254px; overflow: hidden; overflow-y: auto; box-sizing: border-box;
}
.wb-autocomplete-suggestion { position: relative; padding: 0 .6em; line-height: 23px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-size: 1.02em; color: #333; }
.wb-autocomplete-suggestion b { font-weight: bold; }
.wb-autocomplete-suggestion.selected { background: #f0f0f0; }
</style>
<script type="text/javascript">
__wm.bt(575,27,25,2,"web","http://www.osdcom.info/content/view/31/39/","2006-04-09",1996);
</script><div class="wb-autocomplete-suggestions " style="left: 163px; top: 2440px; width: 671px;"></div>
<!-- END WAYBACK TOOLBAR INSERT -->
<div align="center">
<table class="container" cellpadding="0" cellspacing="0" border="0">
<tbody><tr><td class="header">
<script type="text/javascript"><!--
google_ad_client = 'pub-1485690663725782';
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = '468x60_as';
google_ad_type = 'text_image';
google_ad_channel ='';
google_color_border = 'e0e0e0';
google_color_bg = 'fbfbfd';
google_color_link = '0000CC';
google_color_url = '008000';
google_color_text = '3F3F3F';
//--></script>
<script type="text/javascript" src="./OSDEV Community - Simple Memory Allocation Algorithms_files/show_ads.js.&#19979;&#36733;">
</script><iframe name="google_ads_frame" width="468" height="60" frameborder="0" src="./OSDEV Community - Simple Memory Allocation Algorithms_files/ads.html" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no"></iframe>
</td></tr>
<tr><td>

<table class="content_container" cellpadding="0" cellspacing="0" border="0">
<tbody><tr>
<td class="left">
<div id="leftcol">
			<table cellpadding="0" cellspacing="0" class="moduletable">
						<tbody><tr>
				<td>
				
<table width="100%" border="0" cellpadding="0" cellspacing="0">
<tbody><tr align="left"><td><a href="https://web.archive.org/web/20060409094110/http://www.osdcom.info/component/option,com_frontpage/Itemid,1/" class="mainlevel">Home</a></td></tr>
<tr align="left"><td><a href="https://web.archive.org/web/20060409094110/http://www.osdcom.info/component/option,com_mamboboard/Itemid,36/" class="mainlevel">Forums</a></td></tr>
<tr align="left"><td><a href="https://web.archive.org/web/20060409094110/http://www.osdcom.info/content/category/6/21/39/" class="mainlevel" id="active_menu">Articles</a></td></tr>
<tr align="left"><td><a href="https://web.archive.org/web/20060409094110/http://www.osdcom.info/component/option,com_remository/Itemid,37/" class="mainlevel">Downloads</a></td></tr>
<tr align="left"><td><a href="https://web.archive.org/web/20060409094110/http://www.osdcom.info/component/option,com_weblinks/Itemid,23/" class="mainlevel">Directory</a></td></tr>
<tr align="left"><td><a href="https://web.archive.org/web/20060409094110/http://www.osdcom.info/content/view/28/38/" class="mainlevel">OS Index</a></td></tr>
<tr align="left"><td><a href="https://web.archive.org/web/20060409094110/http://www.osdcom.info/component/option,com_contact/Itemid,3/" class="mainlevel">Contact Us</a></td></tr>
</tbody></table>				</td>
			</tr>
			</tbody></table>
						<table cellpadding="0" cellspacing="0" class="moduletable">
							<tbody><tr>
					<th valign="top">
										Login Form					</th>
				</tr>
							<tr>
				<td>
					<form action="https://web.archive.org/web/20060409094110/http://www.osdcom.info/" method="post" name="login">
		<table width="100%" border="0" cellspacing="0" cellpadding="0" align="center">
	<tbody><tr>
		<td>
		Username		<br>
		<input name="username" type="text" class="inputbox" alt="username" size="10">
		<br>
		Password		<br>
		<input type="password" name="passwd" class="inputbox" size="10" alt="password">
		<br>
		<input type="checkbox" name="remember" class="inputbox" value="yes" alt="Remember Me"> 
		Remember me		<br>
		<input type="hidden" name="option" value="login">
		<input type="submit" name="Submit" class="button" value="Login">
		</td>
	</tr>
	<tr>
		<td>
		<a href="https://web.archive.org/web/20060409094110/http://www.osdcom.info/index.php?option=com_registration&amp;task=lostPassword">
		Password Reminder		</a>
		</td>
	</tr>
			<tr>
			<td>
			No account yet?			<a href="https://web.archive.org/web/20060409094110/http://www.osdcom.info/index.php?option=com_registration&amp;task=register">
			Create one			</a>
			</td>
		</tr>
			</tbody></table>
		
	<input type="hidden" name="op2" value="login">
	<input type="hidden" name="lang" value="english">
	<input type="hidden" name="return" value="/index.php?option=com_content&amp;task=view&amp;id=31&amp;Itemid=39">
	<input type="hidden" name="message" value="0">
	</form>
					</td>
			</tr>
			</tbody></table>
			</div>
</td>
<td class="content">
<span class="pathway"><a href="https://web.archive.org/web/20060409094110/http://www.osdcom.info/" class="pathway">Home</a> <img src="./OSDEV Community - Simple Memory Allocation Algorithms_files/arrow.png" alt="arrow"> <a href="https://web.archive.org/web/20060409094110/http://www.osdcom.info/content/category/6/21/39/" class="pathway">Articles</a> <img src="./OSDEV Community - Simple Memory Allocation Algorithms_files/arrow.png" alt="arrow">   Simple Memory Allocation Algorithms </span>
			<table class="contentpaneopen">
			<tbody><tr>
								<td class="contentheading" width="100%">
				Simple Memory Allocation Algorithms								</td>
								<td align="right" width="100%" class="buttonheading">
				<a href="javascript:void window.open(&#39;https://web.archive.org/web/20060409094110/http://www.osdcom.info/index2.php?option=com_content&amp;task=view&amp;id=31&amp;Itemid=39&amp;pop=1&amp;page=0&#39;, &#39;win2&#39;, &#39;status=no,toolbar=no,scrollbars=yes,titlebar=no,menubar=no,resizable=yes,width=640,height=480,directories=no,location=no&#39;);" title="Print">
				<img src="./OSDEV Community - Simple Memory Allocation Algorithms_files/printButton.png" alt="Print" align="middle" name="image" border="0">				</a>
				</td>
							</tr>
			</tbody></table>
			
		<table class="contentpaneopen">
					<tbody><tr>
				<td valign="top" colspan="2" class="createdate">
				Sunday, 26 March 2006				</td>
			</tr>
					<tr>
			<td valign="top" colspan="2">
			<div>Have you got stucked in the development while aiming to implement a modern and very efficient alorithm? Here's a start up point before getting to implement them.<br> <br> </div>		<strong class="bbcode">Simple Memory Allocation Algorithms</strong><br> <br> Memory allocation is a process that assigns chunks of memory upon request of the various processes running on a machine. Today, there are several well known efficient algorithms used on high-end operating systems but their mathematical models are quite difficult to comprehend from the first time by most amateur operating system developers. That’s why most of the simple operating systems available on the amateur websites use less efficient memory allocation algorithms but highly comprehensible and very educative.<br> <br> This article focuses on three simple algorithms you may want to experiment on your osdev projects.<br> <br> <strong class="bbcode">The Simplest Algorithm</strong><br> <br> The complexity of an algorithm is given by the number of steps, their iteration and their timing. Since we are talking about the simplest one, it will have the fastest memory release function: it will do nothing!<br> <br> The allocator will just store the address of the next free available memory block and allocate requested chunks continuously. A brief implementation follows:<br> <br> <div class="code_highlight"><span style="color: #000000"><br> <br> #define&nbsp;MAX_MEMORY&nbsp;1024&nbsp;*&nbsp;1024&nbsp;*&nbsp;MEMORY_SIZE_IN_MEGABYTES<br> <br> int&nbsp;peak;<br> <br> void&nbsp;*malloc(size_t&nbsp;size)&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;*current;<br> if(&nbsp;MAX_MEMORY&nbsp;–&nbsp;peak&nbsp;&lt;&nbsp;size&nbsp;)&nbsp;return&nbsp;null;<br> &nbsp;&nbsp;&nbsp;&nbsp;current&nbsp;=&nbsp;(void&nbsp;*)peak;<br> &nbsp;&nbsp;&nbsp;&nbsp;peak&nbsp;+=&nbsp;size;<br> &nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;current;<br> }<br> <br> void&nbsp;free(void&nbsp;*ptr)&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;return;<br> }<br> </span><br> </div><br> <br> Extremely inefficient, but stable, no different block will overlap to cause memory sharing violations. Since the memory will be consumed after a certain number of allocations, we must implement a mechanism to re-enter the released blocks back in a list of available locations.<br> <br> <strong class="bbcode">The “First Fit” Algorithm</strong><br> <br> The first fit algorithm basically extends the previous one by implementing a list of free blocks. When the allocator will receive a request of X bytes, it will lookup the list for an available block to fit X bytes. Since aiming to find a perfect match my yield negative results we will allocate memory for the X bytes in the first block equal or greater than X.<br> <br> Of course, this will lead to an undesired effect: memory fragmentation. Larger block will be split into smaller ones to fit the requested amounts of memory and we may end up with the impossibility of serving a process requesting Y bytes although the sum of all free, but small, blocks is way greater than Y.<br> <br> A brief C-like implementation follows.<br> <br> <div class="code_highlight"><span style="color: #000000"><br> <br> #define&nbsp;MAX_MEMORY&nbsp;1024&nbsp;*&nbsp;1024&nbsp;*&nbsp;MEMORY_SIZE_IN_MEGABYTES<br> //&nbsp;using&nbsp;a&nbsp;fixed&nbsp;size&nbsp;array&nbsp;isn’t&nbsp;the&nbsp;best&nbsp;idea,</span></div><div class="code_highlight"><span style="color: #000000">// the&nbsp;best&nbsp;implementation&nbsp;would&nbsp;be&nbsp;to&nbsp;manage&nbsp;the&nbsp;data&nbsp;with&nbsp;a&nbsp;chained&nbsp;list<br> #define&nbsp;LIST_ITEMS&nbsp;100<br> <br> typedef&nbsp;struct&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;size_t&nbsp;size;<br> &nbsp;&nbsp;&nbsp;&nbsp;size_t&nbsp;first_byte_ptr;<br> }&nbsp;list_item;<br> <br> list_item&nbsp;list[LIST_ITEMS];<br> list_item&nbsp;allocted[LIST_ITEMS];<br> <br> int&nbsp;j&nbsp;=&nbsp;0;<br> <br> void&nbsp;*malloc(size_t&nbsp;size)&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;i;<br> &nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;*current;<br> <br> &nbsp;&nbsp;&nbsp;&nbsp;if(&nbsp;j&nbsp;&lt;&nbsp;LIST_ITEMS&nbsp;)&nbsp;return&nbsp;null;&nbsp;//&nbsp;no&nbsp;slots<br> <br> &nbsp;&nbsp;&nbsp;&nbsp;for(&nbsp;i&nbsp;=&nbsp;0&nbsp;;&nbsp;i&nbsp;&lt;&nbsp;LIST_ITEMS&nbsp;;&nbsp;i++&nbsp;)<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(&nbsp;list[i].size&nbsp;&gt;=&nbsp;size&nbsp;)&nbsp;break;<br> <br> &nbsp;&nbsp;&nbsp;&nbsp;if(&nbsp;i&nbsp;==&nbsp;LIST_ITEMS&nbsp;)&nbsp;return&nbsp;null;&nbsp;//&nbsp;no&nbsp;suitable&nbsp;block&nbsp;found<br> <br> &nbsp;&nbsp;&nbsp;&nbsp;current&nbsp;=&nbsp;(void&nbsp;*)list[i].first_byte_ptr;<br> &nbsp;&nbsp;&nbsp;&nbsp;list[i].first_byte_ptr&nbsp;+=&nbsp;size;<br> &nbsp;&nbsp;&nbsp;&nbsp;list[i].size&nbsp;-=&nbsp;size;<br> <br> &nbsp;&nbsp;&nbsp;&nbsp;allocated[j].first_byte_ptr&nbsp;=&nbsp;current;<br> &nbsp;&nbsp;&nbsp;&nbsp;allocated[j].size&nbsp;=&nbsp;size;<br> &nbsp;&nbsp;&nbsp;&nbsp;j++;<br> <br> &nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;current;<br> }<br> <br> void&nbsp;free(void&nbsp;*ptr)&nbsp;{<br> &nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;i;<br> <br> &nbsp;&nbsp;&nbsp;&nbsp;for(&nbsp;i&nbsp;=&nbsp;0&nbsp;;&nbsp;i&nbsp;&lt;&nbsp;LIST_ITEMS&nbsp;;&nbsp;i++&nbsp;)<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(&nbsp;allocated[i].first_byte_ptr&nbsp;==&nbsp;ptr&nbsp;)&nbsp;break;<br> &nbsp;&nbsp;&nbsp;&nbsp;<br> &nbsp;&nbsp;&nbsp;&nbsp;for(&nbsp;k&nbsp;=&nbsp;0&nbsp;;&nbsp;k&nbsp;&lt;&nbsp;LIST_ITEMS&nbsp;;&nbsp;k++&nbsp;)<br> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(&nbsp;list[k].size&nbsp;==&nbsp;0&nbsp;)&nbsp;break;<br> <br> &nbsp;&nbsp;&nbsp;&nbsp;list[k].size&nbsp;=&nbsp;allocated[i].size;<br> &nbsp;&nbsp;&nbsp;&nbsp;list[k].first_byte_ptr&nbsp;=&nbsp;allocated[k].first_byte_ptr;<br> <br> &nbsp;&nbsp;&nbsp;&nbsp;allocated[i].first_byte_ptr&nbsp;=&nbsp;0;<br> &nbsp;&nbsp;&nbsp;&nbsp;allocated[i].size&nbsp;=&nbsp;0;<br> <br> &nbsp;&nbsp;&nbsp;&nbsp;return;<br> }<br> </span><br> </div><br> <br> There is enough room for optimization for the above code, especially for the management of the two lists. Chained links are optimal and sorting them when the CPU is idle is a good idea, especially if followed by testing if any blocks are adjacent in order to be merged.<br> <br> <strong class="bbcode">The “Buddy” Algorithm</strong><br> <br> The buddy algorithm is an optimized version of the “first fit” allocator. It will only allocate blocks of certain sizes, maintaining lists for each series of blocks of a specific size. The permitted sizes are often powers of two, aiming to match blocks of basic types which have sizes of powers of two and because splitting a lager block in two will result a pair of permitted blocks of inferior permitted size. Some implementations use other series of sizes, such as the Fibonacci sequence.<br> <br> The main advantage compared to “first fit” is speed. We know exactly where to lookup for free blocks, and if we don’t find one we go straight to the next list, of larger blocks. But as its ancestor, it suffers from memory fragmentation.<br> <br> Let’s suppose a process requests a block of 7 bytes. The allocator will automatically lookup the list of 8 bytes blocks and assign one. There will be a one byte loss in the allocated block. But what if the process then requests a block of 9 bytes? It will look up the 16 bytes block list and return one block. The loss will consist in 7 unused bytes.<br> <br> That may not sound very tragic, but multiply the amounts with 1K or 1MB to get the figures quite closed to the reality. The lost memory space is common known as slack space. Fragmentation can be reduced by making the block sizes closer together.

			</td>
		</tr>
					<tr>
				<td colspan="2" align="left" class="modifydate">
				Last Updated ( Sunday, 26 March 2006 )
				</td>
			</tr>
					</tbody></table>
		</td>
<td class="right">
<div id="rightcol">
			<table cellpadding="0" cellspacing="0" class="moduletable">
						<tbody><tr>
				<td>
				
<form action="https://web.archive.org/web/20060409094110/http://www.osdcom.info/" method="post">

<div align="left" class="search">	
<input alt="search" class="inputbox" type="text" name="searchword" size="28" value="search..." onblur="if(this.value==&#39;&#39;) this.value=&#39;search...&#39;;" onfocus="if(this.value==&#39;search...&#39;) this.value=&#39;&#39;;"></div>

<input type="hidden" name="option" value="search">
</form>				</td>
			</tr>
			</tbody></table>
						<table cellpadding="0" cellspacing="0" class="moduletable">
							<tbody><tr>
					<th valign="top">
										Recent Forum Posts					</th>
				</tr>
							<tr>
				<td>
				<table>
<tbody><tr><td class="recent"><a href="https://web.archive.org/web/20060409094110/http://www.osdcom.info/component/option,com_mamboboard/Itemid,36/func,view/id,718/catid,1/"><b>Re: New Osdev portal</b></a></td></tr><tr><td class="recent2">04/03 10:08 - by <b>root</b></td></tr><tr><td class="recent3">Yep, I actually isolated the crash problem on our side and everything is OK right now.

B)</td></tr><tr><td class="recent"><a href="https://web.archive.org/web/20060409094110/http://www.osdcom.info/component/option,com_mamboboard/Itemid,36/func,view/id,717/catid,1/"><b>Re: New Osdev portal</b></a></td></tr><tr><td class="recent2">04/03 10:01 - by <b>Dakman</b></td></tr><tr><td class="recent3">&gt;We had some downtime last week, maybe that was the problem.
Maybe. Now all ok B)</td></tr><tr><td class="recent"><a href="https://web.archive.org/web/20060409094110/http://www.osdcom.info/component/option,com_mamboboard/Itemid,36/func,view/id,716/catid,1/"><b>Re: New Osdev portal</b></a></td></tr><tr><td class="recent2">04/03 03:13 - by <b>root</b></td></tr><tr><td class="recent3">Hmmm, please keep an eye on it.

We had some downtime last week, maybe that was the problem. I don</td></tr><tr><td class="recent"><a href="https://web.archive.org/web/20060409094110/http://www.osdcom.info/component/option,com_mamboboard/Itemid,36/func,view/id,715/catid,1/"><b>Re: New Osdev portal</b></a></td></tr><tr><td class="recent2">04/02 01:52 - by <b>Dakman</b></td></tr><tr><td class="recent3">Lasttime ww2.sysbin.com can not download more than one page from osdcom.info per one try. Have you s</td></tr><tr><td class="recent"><a href="https://web.archive.org/web/20060409094110/http://www.osdcom.info/component/option,com_mamboboard/Itemid,36/func,view/id,713/catid,1/"><b>Re:Atheos sources</b></a></td></tr><tr><td class="recent2">03/29 04:25 - by <b>Dakman</b></td></tr><tr><td class="recent3">Atheos sources i see in edonkey</td></tr></tbody></table>
				</td>
			</tr>
			</tbody></table>
			</div>
</td>
</tr>
</tbody></table>

</td></tr>
<tr><td class="footer">
Copyright © 2001 - 2006 OSDEV Community Staff. All rights reserved. OSDEV Community is powered by <a target="_child" class="footer_link" href="https://web.archive.org/web/20060409094110/http://www.mamboserver.com/">Mambo</a>. &nbsp; » &nbsp; <a class="footer_link" href="javascript:scroll(0,0)">Back on top</a>
</td></tr>
</tbody></table>
<span style="font-size: 11px; font-family: Arial, Helvetica">
<a href="https://web.archive.org/web/20060409094110/http://www.keywordstuffing.com/">Free Blog</a>&nbsp; &nbsp;<a href="https://web.archive.org/web/20060409094110/http://www.omricon.net/">Free MMORPG</a>&nbsp; &nbsp;<a href="https://web.archive.org/web/20060409094110/http://www.dvdmoviehq.com/">Buy DVD Movies</a>&nbsp; &nbsp;<a href="https://web.archive.org/web/20060409094110/http://www.boyaka.com/">Forestry industry daily</a>&nbsp; &nbsp;<a href="https://web.archive.org/web/20060409094110/http://www.best-fetal-monitors.com/">Fetal &amp; Baby Monitors</a><script src="./OSDEV Community - Simple Memory Allocation Algorithms_files/urchin.js.&#19979;&#36733;" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-255744-2";
urchinTracker();
</script>
<br>A <a href="https://web.archive.org/web/20060409094110/http://www.webarticles.org/">WebArticles</a> site. Sponsored by <a href="https://web.archive.org/web/20060409094110/http://www.evoleto.com/">Evoleto</a>. <a href="https://web.archive.org/web/20060409094110/http://www.motorola-v525.info/" title="Motorola V525">Motorola V525</a> / <a href="https://web.archive.org/web/20060409094110/http://www.intellidir.com/directory/" title="IntelliDir">Business Directory</a> / <a href="https://web.archive.org/web/20060409094110/http://www.inctime.com/Incorporation-in-the-USA/Delaware-Incorporation/" title="Delaware Incorporation">Delaware Incorporation</a> / <a href="https://web.archive.org/web/20060409094110/http://www.web4sudoku.com/">Play Sudoku Online</a></span>
</div>
<a href="https://web.archive.org/web/20060409094110/http://www.erotikexpress.com/studios/"><img src="./OSDEV Community - Simple Memory Allocation Algorithms_files/blank.gif" border="0"></a> <a href="https://web.archive.org/web/20060409094110/http://www.erotikxpress.com/sitemap.html"><img src="./OSDEV Community - Simple Memory Allocation Algorithms_files/blank.gif" border="0"></a> <a href="https://web.archive.org/web/20060409094110/http://www.adult-porno.net/"><img src="./OSDEV Community - Simple Memory Allocation Algorithms_files/blank.gif" border="0"></a>


<!--
playback timings (ms):
  LoadShardBlock: 529.65 (3)
  esindex: 0.013
  captures_list: 655.393
  CDXLines.iter: 18.218 (3)
  PetaboxLoader3.datanode: 246.851 (4)
  exclusion.robots.fetch: 91.778 (4)
  exclusion.robots: 95.165
  exclusion.robots.policy: 0.247
  RedisCDXSource: 7.5
  PetaboxLoader3.resolve: 381.17 (3)
  load_resource: 174.924
--><link rel="stylesheet" type="text/css" href="chrome-extension://liecbddmkiiihnedobmlmillhodjkdmb/css/content.css"></body><loom-container id="lo-engage-ext-container"><loom-shadow data-reactroot="" classname="resolved"></loom-shadow></loom-container></html>